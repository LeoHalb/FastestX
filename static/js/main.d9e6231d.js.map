{"version":3,"file":"static/js/main.d9e6231d.js","mappings":"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","sources":["components/ActivityMap.js","components/Activity.js","components/Feed.js","App.js","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/node module decorator","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import {ExpoLeaflet} from 'expo-leaflet'\nimport {polygonCenter} from \"leaflet/src/geometry/PolyUtil\";\nimport {EPSG3857} from \"leaflet/src/geo/crs/CRS.EPSG3857\";\nimport {ActivityIndicator, Pressable} from 'react-native'\nimport \"leaflet/dist/leaflet.css\"\n\nexport const ActivityMap = (props) => {\n\n    const center = polygonCenter(props.positions.fastestLatlng.length > 0 ? props.positions.fastestLatlng : props.positions.latlng, EPSG3857)\n\n    const mapLayers = [{\n        attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n        baseLayerIsChecked: true,\n        baseLayerName: 'OpenStreetMap',\n        layerType: 'TileLayer',\n        url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    }]\n\n    const mapShapes = [\n        {\n            shapeType: 'polyline',\n            color: \"#123123\",\n            id: \"1\",\n            positions: props.positions.latlng.map(el => ({lat: el[0], lng: el[1]}))\n        }\n    ]\n\n    if (props.positions.fastestLatlng.length > 0) {\n        mapShapes.push({\n            shapeType: 'polyline',\n            color: \"#fc5200\",\n            id: \"2\",\n            positions: props.positions.fastestLatlng.map(el => ({lat: el[0], lng: el[1]}))\n        })\n    }\n\n    const mapOptions = {\n        zoomControl: false,\n    }\n\n    const initialPosition = {\n        lat: center.lat,\n        lng: center.lng,\n    }\n\n    return (\n        <>\n            <Pressable style={{width: \"100%\", height: \"260px\"}}>\n                <ExpoLeaflet\n                    loadingIndicator={() => <ActivityIndicator/>}\n                    onMessage={() => {}}\n                    mapCenterPosition={initialPosition}\n                    mapLayers={mapLayers}\n                    mapOptions={mapOptions}\n                    mapShapes={mapShapes}\n                />\n            </Pressable>\n        </>\n    )\n\n}","import React, {useState, useEffect} from \"react\";\nimport {\n    View,\n    Text,\n    StyleSheet,\n    ActivityIndicator,\n    Pressable,\n    LayoutAnimation\n} from \"react-native\";\nimport Ionicons from '@expo/vector-icons/Ionicons';\nimport {FontAwesome5} from '@expo/vector-icons';\nimport {MaterialCommunityIcons} from '@expo/vector-icons';\nimport * as Linking from 'expo-linking';\nimport {ActivityMap} from \"./ActivityMap\";\n// import { ActivityMap } from './ActivityMap'\n\nexport default function Activity(props) {\n\n    useEffect(() => {\n        LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n        setExpanded(false)\n        setFastestDistance('')\n        setDistanceMeasure(props.distanceMeasure)\n        setTimeMeasure(props.timeMeasure)\n        setLoading(false)\n        setPositions({latlng: [], fastestLatlng: []})\n    }, [props.distanceMeasure, props.timeMeasure])\n\n    const [fastestDistance, setFastestDistance] = useState('')\n    const [loading, setLoading] = useState(false)\n    const [expanded, setExpanded] = useState(false)\n    const [distanceMeasure, setDistanceMeasure] = useState('1000')\n    const [timeMeasure, setTimeMeasure] = useState('')\n    const [positions, setPositions] = useState({latlng: [], fastestLatlng: []})\n\n\n    async function findFastestDistance() {\n        const trivial_winner = {\n            start: {distance: 0, time: 0},\n            end: {distance: 0, time: 0},\n            distance: 0,\n            time: 999999999999999,\n            heartrate: 0,\n            elevation: {gain: 0, loss: 0},\n            range: {start: 0, end: 0}\n        }\n\n        if (distanceMeasure === 0 || timeMeasure === 0) {\n            setFastestDistance(trivial_winner)\n        } else if (!fastestDistance && distanceMeasure !== '0' && distanceMeasure !== '' && loading === false) {\n            setLoading(true)\n            const streams = await getStreams(props.activity.id)\n            const altitudeStream = streams.altitude?.data\n            const distanceStream = streams.distance?.data\n            const timeStream = streams.time?.data\n            const heartrateStream = streams.heartrate?.data\n            const latlngStream = streams.latlng?.data\n\n            let fastestSegment = trivial_winner\n\n            props.activity.total_elevation_gain = Math.round(altitudeStream?.reduce((acc, curr, id, arr) => curr > arr[id - 1] ? acc + curr - arr[id - 1] : acc + 0, 0))\n            props.activity.total_elevation_loss = Math.round(altitudeStream?.reduce((acc, curr, id, arr) => curr < arr[id - 1] ? acc + arr[id - 1] - curr : acc + 0, 0))\n\n            if (distanceMeasure >= props.activity.distance) {\n                setFastestDistance(undefined)\n                setPositions({latlng: latlngStream, fastestLatlng: []})\n                return\n            }\n\n            if (distanceStream && timeStream) {\n                const distanceStreamUpperLimit = distanceStream.slice(-1) - distanceMeasure\n\n                for (let i = 0; distanceStream[i] < distanceStreamUpperLimit; i++) {\n                    const j = distanceStream.indexOf(distanceStream.slice(i).find(el => el - distanceStream[i] >= distanceMeasure))\n                    if (j !== -1) {\n                        const currentSegment = {\n                            distance: Math.round((distanceStream[j] - distanceStream[i]) * 10) / 10,\n                            time: timeStream[j] - timeStream[i],\n                            range: {start: i, end: j}\n                        }\n\n                        if (currentSegment.time < fastestSegment.time || (currentSegment.time === fastestSegment.time && currentSegment.distance > fastestSegment.distance)) {\n                            fastestSegment = currentSegment\n                        }\n                    }\n                }\n\n                if (fastestSegment) {\n                    fastestSegment.start = {\n                        distance: distanceStream[fastestSegment.range.start],\n                        time: timeStream[fastestSegment.range.start]\n                    }\n                    fastestSegment.end = {\n                        distance: distanceStream[fastestSegment.range.end],\n                        time: timeStream[fastestSegment.range.end]\n                    }\n                    fastestSegment.pace = timeInHoursAndMinutes(Math.round((1000 / (distanceStream[fastestSegment.range.end] - distanceStream[fastestSegment.range.start])) * (timeStream[fastestSegment.range.end] - timeStream[fastestSegment.range.start])))\n                    fastestSegment.heartrate = Math.round(heartrateStream?.slice(fastestSegment.range.start, fastestSegment.range.end + 1).reduce((acc, curr) => acc + curr, 0) / heartrateStream?.slice(fastestSegment.range.start, fastestSegment.range.end + 1).length)\n\n                    const relevantAltitudeStream = altitudeStream?.slice(fastestSegment.range.start, fastestSegment.range.end + 1)\n                    fastestSegment.elevation = {\n                        gain: Math.round(relevantAltitudeStream?.reduce((acc, curr, id, arr) => curr > arr[id - 1] ? acc + curr - arr[id - 1] : acc + 0, 0)),\n                        loss: Math.round(relevantAltitudeStream?.reduce((acc, curr, id, arr) => curr < arr[id - 1] ? acc + arr[id - 1] - curr : acc + 0, 0))\n                    }\n                }\n\n                if (latlngStream?.length > 0) {\n                    let fastestLatlng = []\n                    if (fastestSegment) {\n                        fastestLatlng = latlngStream.slice(fastestSegment.range.start, fastestSegment.range.end + 1)\n                    }\n                    setPositions({latlng: latlngStream, fastestLatlng: fastestLatlng})\n                }\n\n                setLoading(false)\n                LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n                setFastestDistance(fastestSegment === trivial_winner ? undefined : fastestSegment)\n            } else {\n                setFastestDistance(undefined)\n            }\n        } else if (!fastestDistance && timeMeasure !== '0' && timeMeasure !== '' && loading === false) {\n            setLoading(true)\n            const streams = await getStreams(props.activity.id)\n            const altitudeStream = streams.altitude?.data\n            const distanceStream = streams.distance?.data\n            const timeStream = streams.time?.data\n            const heartrateStream = streams.heartrate?.data\n            const latlngStream = streams.latlng?.data\n\n            if (latlngStream) {\n                setPositions({...positions, latlng: latlngStream})\n            }\n\n            let fastestSegment = trivial_winner\n\n            props.activity.total_elevation_gain = Math.round(altitudeStream?.reduce((acc, curr, id, arr) => curr > arr[id - 1] ? acc + curr - arr[id - 1] : acc + 0, 0))\n            props.activity.total_elevation_loss = Math.round(altitudeStream?.reduce((acc, curr, id, arr) => curr < arr[id - 1] ? acc + arr[id - 1] - curr : acc + 0, 0))\n\n            if (timeMeasure >= props.activity.elapsed_time) {\n                setFastestDistance(undefined)\n                setPositions({latlng: latlngStream, fastestLatlng: []})\n                return\n            }\n\n            if (distanceStream && timeStream) {\n                const timeStreamUpperLimit = timeStream.slice(-1) - timeMeasure\n\n                for (let i = 0; timeStream[i] < timeStreamUpperLimit; i++) {\n                    const j = timeStream.indexOf(timeStream.slice(i).find(el => el - timeStream[i] >= timeMeasure))\n                    if (j !== -1) {\n                        const currentSegment = {\n                            distance: Math.round((distanceStream[j] - distanceStream[i]) * 10) / 10,\n                            time: timeStream[j] - timeStream[i],\n                            range: {start: i, end: j}\n                        }\n\n                        if (currentSegment.time < fastestSegment.time || (currentSegment.time === fastestSegment.time && currentSegment.distance > fastestSegment.distance)) {\n                            fastestSegment = currentSegment\n                        }\n                    }\n                }\n\n                if (fastestSegment) {\n                    fastestSegment.start = {\n                        distance: distanceStream[fastestSegment.range.start],\n                        time: timeStream[fastestSegment.range.start]\n                    }\n                    fastestSegment.end = {\n                        distance: distanceStream[fastestSegment.range.end],\n                        time: timeStream[fastestSegment.range.end]\n                    }\n                    fastestSegment.pace = timeInHoursAndMinutes(Math.round((1000 / (distanceStream[fastestSegment.range.end] - distanceStream[fastestSegment.range.start])) * (timeStream[fastestSegment.range.end] - timeStream[fastestSegment.range.start])))\n                    fastestSegment.heartrate = Math.round(heartrateStream?.slice(fastestSegment.range.start, fastestSegment.range.end + 1).reduce((acc, curr) => acc + curr, 0) / heartrateStream?.slice(fastestSegment.range.start, fastestSegment.range.end + 1).length)\n\n                    const relevantAltitudeStream = altitudeStream?.slice(fastestSegment.range.start, fastestSegment.range.end + 1)\n                    fastestSegment.elevation = {\n                        gain: Math.round(relevantAltitudeStream?.reduce((acc, curr, id, arr) => curr > arr[id - 1] ? acc + curr - arr[id - 1] : acc + 0, 0)),\n                        loss: Math.round(relevantAltitudeStream?.reduce((acc, curr, id, arr) => curr < arr[id - 1] ? acc + arr[id - 1] - curr : acc + 0, 0))\n                    }\n                }\n\n                if (latlngStream?.length > 0) {\n                    let fastestLatlng = []\n                    if (fastestSegment) {\n                        fastestLatlng = latlngStream.slice(fastestSegment.range.start, fastestSegment.range.end + 1)\n                    }\n                    setPositions({latlng: latlngStream, fastestLatlng: fastestLatlng})\n                }\n\n                setLoading(false)\n                LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n                setFastestDistance(fastestSegment === trivial_winner ? undefined : fastestSegment)\n            } else {\n                setFastestDistance(undefined)\n            }\n        }\n    }\n\n    function timeInHoursAndMinutes(time) {\n        const hours = Math.floor(time / 3600)\n        let rest = time - hours * 3600\n        const minutes = Math.floor(rest / 60)\n        rest = time - minutes * 60 - hours * 3600\n        const seconds = rest < 10 ? `0${rest}` : rest\n        return `${hours !== 0 ? `${hours}:` < 10 ? `0${hours}:` : `${hours}:` : ''}${minutes < 10 ? `0${minutes}` : minutes}:${seconds} ${hours > 0 ? 'h' : 'min'}`\n    }\n\n    const updateLayout = () => {\n        LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n        setExpanded(!expanded)\n    };\n\n    async function getStreams(id) {\n        return fetch(`https://www.strava.com/api/v3/activities/${id}/streams?access_token=${props.credentials.accessToken}&keys=time,distance,heartrate,altitude,latlng&key_by_type=true`)\n            .then((res) => res.json())\n    }\n\n    function DrawDistance() {\n        if (fastestDistance === undefined || distanceMeasure === '0' || timeMeasure === '0') {\n            return (\n                <View style={styles.modalContainer}>\n                    <View\n                        style={[styles.modalLine, {justifyContent: \"space-evenly\"}]}\n                    >\n                        <View>\n                            {!isNaN(props.activity.elapsed_time) && props.activity.elapsed_time !== 0 &&\n                                <Ionicons\n                                    style={{textAlign: \"center\", alignSelf: \"center\"}}\n                                    name=\"timer\"\n                                    size={28}\n                                />\n                            }\n                            {!isNaN(props.activity.distance) && props.activity.distance !== 0 &&\n                                <MaterialCommunityIcons\n                                    style={{textAlign: \"center\", alignSelf: \"center\"}}\n                                    name=\"map-marker-distance\"\n                                    size={28}\n                                />\n                            }\n                            {!isNaN(props.activity.average_speed) && props.activity.average_speed !== 0 &&\n                                <>\n                                    <Text\n                                        style={{\n                                            display: \"flex\",\n                                            textAlign: \"center\",\n                                            alignSelf: \"center\",\n                                            fontSize: 22,\n                                            fontWeight: 'bold'\n                                        }}\n                                    >\n                                        [min/km]\n                                    </Text>\n                                    <Text\n                                        style={{\n                                            display: \"flex\",\n                                            textAlign: \"center\",\n                                            alignSelf: \"center\",\n                                            fontSize: 22,\n                                            fontWeight: 'bold'\n                                        }}\n                                    >\n                                        [km/h]\n                                    </Text>\n                                </>\n                            }\n                            {!isNaN(props.activity.average_heartrate) && props.activity.average_heartrate !== 0 &&\n                                <Text\n                                    style={{\n                                        display: \"flex\",\n                                        textAlign: \"center\",\n                                        alignSelf: \"center\",\n                                        fontSize: 22,\n                                        fontWeight: 'bold'\n                                    }}\n                                >\n                                    [bpm]\n                                </Text>\n                            }\n                            {!isNaN(props.activity.total_elevation_gain) && props.activity.total_elevation_gain !== 0 &&\n                                <Text\n                                    style={{\n                                        display: \"flex\",\n                                        textAlign: \"center\",\n                                        alignSelf: \"center\",\n                                        fontSize: 22,\n                                        fontWeight: 'bold'\n                                    }}\n                                >\n                                    [m]\n                                </Text>\n                            }\n                        </View>\n                        <View>\n                            {!isNaN(props.activity.elapsed_time) && props.activity.elapsed_time !== 0 &&\n                                <Text\n                                    style={[\n                                        styles.name,\n                                        {textAlign: \"center\"}\n                                    ]}\n                                >\n                                    {`${timeInHoursAndMinutes(props.activity.elapsed_time)}`}\n                                </Text>\n                            }\n                            {!isNaN(props.activity.distance) && props.activity.distance !== 0 &&\n                                <Text\n                                    style={[\n                                        styles.name,\n                                        {textAlign: \"center\"}\n                                    ]}\n                                >\n                                    {`${Math.round(props.activity.distance / 10) / 100} km`}\n                                </Text>\n                            }\n                            {!isNaN(props.activity.average_speed) && props.activity.average_speed !== 0 &&\n                                <>\n                                    <Text\n                                        style={[\n                                            styles.name,\n                                            {textAlign: \"center\"}\n                                        ]}\n                                    >\n                                        {`${timeInHoursAndMinutes(Math.round(1000 / props.activity.average_speed)).replace(' min', '').replace(' h', '')}`}\n                                    </Text>\n                                    <Text\n                                        style={[\n                                            styles.name,\n                                            {textAlign: \"center\"}\n                                        ]}\n                                    >\n                                        {`${Math.round(props.activity.average_speed * 3.6 * 10) / 10}`}\n                                    </Text>\n                                </>\n                            }\n                            {!isNaN(props.activity.average_heartrate) && props.activity.average_heartrate !== 0 &&\n                                <Text\n                                    style={[\n                                        styles.name,\n                                        {textAlign: \"center\"}\n                                    ]}\n                                >\n                                    {`${Math.round(props.activity.average_heartrate)}`}\n                                </Text>\n                            }\n                            {!isNaN(props.activity.total_elevation_gain) && props.activity.total_elevation_gain !== 0 &&\n                                <Text\n                                    style={[\n                                        styles.name,\n                                        {textAlign: \"center\"}\n                                    ]}\n                                >\n                                    {`+${props.activity.total_elevation_gain} / -${props.activity.total_elevation_loss}`}\n                                </Text>\n                            }\n                        </View>\n                    </View>\n\n                    {positions.latlng?.length > 0 ?\n                        <>\n                            <View style={{width: \"100%\"}}>\n                                <View style={styles.separator}/>\n                            </View>\n                            <ActivityMap positions={positions}></ActivityMap>\n                        </> : <></>\n                    }\n                </View>\n            )\n        } else if (fastestDistance) {\n            return (\n                <View style={styles.modalContainer}>\n                    <View style={[styles.modalLine, {display: \"flex\"}]}>\n                        <Text\n                            style={[\n                                styles.name,\n                                {flex: 1, marginRight: \"auto\"}\n                            ]}\n                        >\n                            {`${fastestDistance.distance} m`}\n                        </Text>\n                        <MaterialCommunityIcons\n                            style={{display: \"flex\", alignItems: \"center\"}}\n                            name=\"map-marker-distance\"\n                            size={28}\n                        />\n                        <Text\n                            style={[\n                                styles.name,\n                                {textAlign: \"right\", flex: 1, marginLeft: \"auto\"}\n                            ]}\n                        >\n                            {`${Math.round(props.activity.distance / 10) / 100} km`}\n                        </Text>\n                    </View>\n                    <View style={[styles.modalLine, {display: \"flex\"}]}>\n                        <Text\n                            style={[\n                                styles.name,\n                                {flex: 1, marginRight: \"auto\"}\n                            ]}\n                        >\n                            {`${timeInHoursAndMinutes(fastestDistance.time)}`}\n                        </Text>\n                        <Ionicons\n                            style={{display: \"flex\", alignItems: \"center\"}}\n                            name=\"timer\"\n                            size={28}\n                        />\n                        <Text\n                            style={[\n                                styles.name,\n                                {textAlign: \"right\", flex: 1, marginLeft: \"auto\"}\n                            ]}\n                        >\n                            {`${timeInHoursAndMinutes(props.activity.elapsed_time)}`}\n                        </Text>\n                    </View>\n                    <View style={[styles.modalLine, {display: \"flex\"}]}>\n                        <Text\n                            style={[\n                                styles.name,\n                                {flex: 1, marginRight: \"auto\"}\n                            ]}\n                        >\n                            {`${fastestDistance.pace.replace(' min', '').replace(' h', '')}`}\n                        </Text>\n                        <Text\n                            style={{display: \"flex\", alignItems: \"center\", fontSize: 22, fontWeight: 'bold'}}\n                        >\n                            [min/km]\n                        </Text>\n                        <Text\n                            style={[\n                                styles.name,\n                                {textAlign: \"right\", flex: 1, marginLeft: \"auto\"}\n                            ]}\n                        >\n                            {`${timeInHoursAndMinutes(Math.round(1000 / props.activity.average_speed)).replace(' min', '').replace(' h', '')}`}\n                        </Text>\n                    </View>\n                    <View style={[styles.modalLine, {display: \"flex\"}]}>\n                        <Text\n                            style={[\n                                styles.name,\n                                {flex: 1, marginRight: \"auto\"}\n                            ]}\n                        >\n                            {`${Math.round((fastestDistance.end.distance - fastestDistance.start.distance) / (fastestDistance.end.time - fastestDistance.start.time) * 3.6 * 10) / 10}`}\n                        </Text>\n                        <Text\n                            style={{display: \"flex\", alignItems: \"center\", fontSize: 22, fontWeight: 'bold'}}\n                        >\n                            [km/h]\n                        </Text>\n                        <Text\n                            style={[\n                                styles.name,\n                                {textAlign: \"right\", flex: 1, marginLeft: \"auto\"}\n                            ]}\n                        >\n                            {`${Math.round(props.activity.average_speed * 3.6 * 10) / 10}`}\n                        </Text>\n                    </View>\n                    {!isNaN(fastestDistance.heartrate) &&\n                        <View style={[styles.modalLine, {display: \"flex\"}]}>\n                            <Text\n                                style={[\n                                    styles.name,\n                                    {flex: 1, marginRight: \"auto\"}\n                                ]}\n                            >\n                                {`${fastestDistance.heartrate}`}\n                            </Text>\n                            <Text\n                                style={{display: \"flex\", alignItems: \"center\", fontSize: 22, fontWeight: 'bold'}}\n                            >\n                                [bpm]\n                            </Text>\n                            <Text\n                                style={[\n                                    styles.name,\n                                    {textAlign: \"right\", flex: 1, marginLeft: \"auto\"}\n                                ]}\n                            >\n                                {`${Math.round(props.activity.average_heartrate)}`}\n                            </Text>\n                        </View>\n                    }\n                    {!isNaN(fastestDistance.elevation.gain) && !isNaN(fastestDistance.elevation.loss) &&\n                        <View style={[styles.modalLine, {display: \"flex\"}]}>\n                            <Text\n                                style={[\n                                    styles.name,\n                                    {flex: 1, marginRight: \"auto\"}\n                                ]}\n                            >\n                                {`+${fastestDistance.elevation.gain} / -${fastestDistance.elevation.loss}`}\n                            </Text>\n                            <Text\n                                style={{display: \"flex\", alignItems: \"center\", fontSize: 22, fontWeight: 'bold'}}\n                            >\n                                [m]\n                            </Text>\n                            <Text\n                                style={[\n                                    styles.name,\n                                    {textAlign: \"right\", flex: 1, marginLeft: \"auto\"}\n                                ]}\n                            >\n                                {`+${props.activity.total_elevation_gain} / -${props.activity.total_elevation_loss}`}\n                            </Text>\n                        </View>\n                    }\n\n                    <View style={{width: \"100%\"}}>\n                        <View style={styles.separator}/>\n                    </View>\n\n                    {positions.latlng?.length > 0 ? <ActivityMap positions={positions}></ActivityMap> : <></>}\n\n                    <View style={[styles.modalLine, {display: \"flex\", marginTop: positions.latlng?.length > 0 ? 8 : 0}]}>\n                        <Text\n                            style={[\n                                styles.name,\n                                {flex: 1, marginRight: \"auto\"}\n                            ]}\n                        >\n                            {`${Math.round(fastestDistance.start.distance) / 1000} km`}\n                        </Text>\n                        <FontAwesome5\n                            style={{display: \"flex\", alignItems: \"center\"}}\n                            name=\"at\"\n                            size={24}\n                        />\n                        <Text\n                            style={[\n                                styles.name,\n                                {textAlign: \"right\", flex: 1, marginLeft: \"auto\"}\n                            ]}\n                        >\n                            {`${timeInHoursAndMinutes(fastestDistance.start.time)}`}\n                        </Text>\n                    </View>\n                </View>\n            )\n        } else if (loading) {\n            return (\n                <ActivityIndicator color=\"black\"/>\n            )\n        } else {\n            return null\n        }\n    }\n\n    return (\n        <Pressable\n            style={styles.item}\n            onPress={() => {\n                findFastestDistance(props.activity)\n                updateLayout()\n            }}>\n            <Text style={[styles.name, {textAlign: \"center\"}]}>\n                {`${props.activity.name}`}\n            </Text>\n            <Text>\n                {`${new Date(props.activity.start_date).toLocaleDateString()}`}\n            </Text>\n            <Pressable\n                onPress={() => Linking.openURL(`https://www.strava.com/activities/${props.activity.id}`)}\n            >\n                <Text\n                    style={{color: \"blue\", textDecorationColor: \"blue\", textDecorationLine: \"underline\"}}\n                >\n                    View on Strava\n                </Text>\n            </Pressable>\n            {expanded && distanceMeasure !== '0' && timeMeasure !== '0' ?\n                <View style={{width: \"100%\"}}>\n                    <View style={styles.separator}/>\n                    <DrawDistance></DrawDistance>\n                </View> :\n                null\n            }\n        </Pressable>\n    )\n}\n\nconst styles = StyleSheet.create({\n    item: {\n        marginHorizontal: 16,\n        marginTop: 16,\n        alignItems: \"center\",\n        backgroundColor: \"#fc5200\",\n        borderRadius: 20,\n        padding: 10,\n        elevation: 2,\n        boxShadowColor: \"#000\",\n        boxShadowOffset: {\n            width: 0,\n            height: 2\n        },\n        boxShadowOpacity: 0.25,\n        boxShadowRadius: 4,\n    },\n    modalContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    modal: {\n        width: \"90%\",\n        marginLeft: \"5%\",\n        backgroundColor: \"#fc5200\",\n        borderRadius: 20,\n        padding: 35,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        boxShadowColor: \"#000\",\n        boxShadowOffset: {\n            width: 0,\n            height: 2\n        },\n        boxShadowOpacity: 0.25,\n        boxShadowRadius: 4,\n        elevation: 5,\n    },\n    modalLine: {\n        width: \"100%\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\"\n    },\n    separator: {\n        height: 2,\n        backgroundColor: 'black',\n        marginTop: 8,\n        marginBottom: 8\n    },\n    name: {\n        fontSize: 24,\n    }\n});","import { useEffect, useState } from \"react\";\nimport {\n    StyleSheet,\n    Text,\n    View,\n    FlatList,\n    ActivityIndicator,\n    Pressable,\n    TextInput,\n    LayoutAnimation\n} from 'react-native';\nimport {Ionicons} from '@expo/vector-icons';\nimport Activity from \"./Activity.js\";\n\nexport default function Feed(props) {\n\n    const [activities, setActivities] = useState([]);\n    const [refreshing, setRefreshing] = useState(false)\n    const [loading, setLoading] = useState(true)\n    const [page, setPage] = useState(1)\n    const [distanceMeasure, setDistanceMeasure] = useState('1000')\n    const [timeMeasure, setTimeMeasure] = useState('')\n\n    useEffect(() => {\n        if (props.credentials.accessToken !== undefined) {\n            getActivities(false)\n        }\n    }, [props.credentials])\n\n    async function getActivities(refresh) {\n        refresh ?\n            setRefreshing(true) :\n            setLoading(true)\n        fetch(`https://www.strava.com/api/v3/athlete/activities?access_token=${props.credentials.accessToken}&per_page=10&page=${refresh ? 1 : page}`)\n            .then((res) => res.json())\n            .then((data) => {\n                data.forEach((el) => el.isExpanded = false)\n                setActivities(refresh ? data : activities.concat(data))\n                setPage(page + 1)\n            })\n            .catch(error => console.log(error))\n            .finally(() => {\n                setRefreshing(false)\n                setLoading(false)\n            })\n    }\n\n    const renderItem = ({item}) => {\n        return (\n            <Activity activity={item} distanceMeasure={distanceMeasure} timeMeasure={timeMeasure} credentials={props.credentials}/>\n        )\n    }\n\n    return (\n        <>\n            {(loading && activities.length === 0) ?\n                <ActivityIndicator style={{marginTop: 16}} size='large' color=\"black\"/>:\n                <FlatList\n                    style={{alignSelf: \"center\", width: \"100%\", maxWidth: 700}}\n                    data={activities}\n                    renderItem={renderItem}\n                    keyExtractor={item => item.id}\n                    keyboardDismissMode={'onDrag'}\n                    onRefresh={() => {\n                        LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n                        getActivities(true)\n                    }}\n                    refreshing={refreshing}\n                    ListHeaderComponent={\n                        <View style={styles.item}>\n                            <View style={{flexDirection: \"row\", justifyContent: \"space-between\"}}>\n                                <Text style={{fontSize: 24}}>Distance [m]</Text>\n                                <TextInput\n                                    style={styles.input}\n                                    contextMenuHidden={true}\n                                    selectionColor='#fc5200'\n                                    inputMode={\"numeric\"}\n                                    onChangeText={text => {\n                                        var number = text.replace(/[^0-9]/g, '')\n                                        isNaN(number) ?\n                                            setDistanceMeasure(0) :\n                                            setTimeMeasure('')\n                                        setDistanceMeasure(number)\n                                    }}\n                                    value={distanceMeasure.toString()}\n                                />\n                            </View>\n                            <View style={{flexDirection: \"row\", justifyContent: \"space-between\", marginTop: 5}}>\n                                <Text style={{fontSize: 24}}>Time [s]</Text>\n                                <TextInput\n                                    style={styles.input}\n                                    contextMenuHidden={true}\n                                    selectionColor='#fc5200'\n                                    inputMode={\"numeric\"}\n                                    onChangeText={text => {\n                                        var number = text.replace(/[^0-9]/g, '')\n                                        isNaN(number) ?\n                                            setTimeMeasure('') :\n                                            setDistanceMeasure('')\n                                        setTimeMeasure(number)\n                                    }}\n                                    value={timeMeasure.toString()}\n                                />\n                            </View>\n                        </View>\n                    }\n                    ListFooterComponent={\n                        <Pressable\n                            style={[styles.item, {marginBottom: 16, alignItems: \"center\"}]}\n                            onPress={() => {\n                                LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n                                getActivities(false)\n                            }}\n                        >\n                            {loading ?\n                                <ActivityIndicator style={{marginTop: 14, marginBottom: 14}} color=\"black\"/> :\n                                <View style={{flexDirection: \"row\", marginTop: 8, marginBottom: 8}}>\n                                    <Ionicons name=\"reload-circle\" size={28} color=\"black\"/>\n                                    <Text style={{fontSize: 24}}> Load more</Text>\n                                </View>\n                            }\n                        </Pressable>\n                    }\n                />\n            }\n        </>\n    )\n}\n\nconst styles = StyleSheet.create({\n    item: {\n        marginHorizontal: 16,\n        marginTop: 16,\n        backgroundColor: \"#fc5200\",\n        borderRadius: 20,\n        padding: 16,\n        elevation: 2,\n        boxShadowColor: \"#000\",\n        boxShadowOffset: {\n            width: 0,\n            height: 2\n        },\n        boxShadowOpacity: 0.25,\n        boxShadowRadius: 4,\n    },\n    input: {\n        backgroundColor: \"white\",\n        width: 100,\n        fontSize: 24,\n        textAlign: \"center\",\n        borderRadius: 10\n    },\n});\n  ","import React, {useState, useEffect} from \"react\";\nimport {\n    StyleSheet,\n    Text,\n    View,\n    Platform,\n    UIManager,\n    Pressable,\n    ActivityIndicator,\n} from 'react-native';\nimport {Image} from 'expo-image';\nimport {SafeAreaProvider, SafeAreaView} from 'react-native-safe-area-context';\nimport {StatusBar} from 'expo-status-bar';\nimport * as WebBrowser from 'expo-web-browser';\nimport {makeRedirectUri, useAuthRequest, exchangeCodeAsync, TokenResponse, refreshAsync} from 'expo-auth-session';\nimport Feed from \"./components/Feed\";\nimport {AntDesign} from '@expo/vector-icons';\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nconst pwrdByStravaSmall = require(\"./assets/api_logo_pwrdBy_strava_stack_white.svg\")\nconst connectWithStrava = require(\"./assets/btn_strava_connectwith_orange.svg\")\nconst pwrdByStravaBig = require(\"./assets/api_logo_pwrdBy_strava_stack_light.svg\")\nconst demo = require('./assets/demo.jpg')\n\nWebBrowser.maybeCompleteAuthSession();\n\nconst discovery = {\n    authorizationEndpoint: 'https://www.strava.com/oauth/mobile/authorize',\n    tokenEndpoint: 'https://eou0f5t5ol4avvx.m.pipedream.net',\n    revocationEndpoint: 'https://www.strava.com/oauth/deauthorize',\n};\n\nexport default function App() {\n\n    const [loggedIn, setLoggedIn] = useState(false)\n    const [credentials, setCredentials] = useState({})\n    const [loading, setLoading] = useState(true)\n    const [errorState, setErrorState] = useState('')\n    const [messyOAuthRedirectFromStravaApp, setMessyOAuthRedirectFromStravaApp] = useState(false)\n\n    const setAccessToken = async () => {\n        exchangeCodeAsync(\n            {\n                clientId: request?.clientId,\n                redirectUri: makeRedirectUri({\n                    scheme: 'fastestx',\n                    path: 'FastestX'\n                }),\n                code: response?.params.code,\n            },\n            discovery\n        ).then((data) => {\n            setCredentials(data)\n            AsyncStorage.setItem(\"strava_credentials\", JSON.stringify(data))\n            setLoading(false)\n            setLoggedIn(true)\n        }).catch(() => {\n            setErrorState('rate_limit')\n            setLoading(false)\n        })\n    }\n\n    const [request, response, promptAsync] = useAuthRequest(\n        {\n            clientId: '80072',\n            scopes: ['activity:read_all'],\n            redirectUri: makeRedirectUri({\n                scheme: 'fastestx',\n                path: 'FastestX'\n            }),\n        },\n        discovery\n    );\n\n    const handleLogout = async () => {\n        await fetch(`https://www.strava.com/oauth/deauthorize?access_token=${credentials.accessToken}`, {\n            method: 'POST',\n        });\n\n        await AsyncStorage.removeItem(\"strava_credentials\");\n        setCredentials({})\n        setLoggedIn(false)\n        setLoading(false)\n    }\n\n    useEffect(() => {\n        const checkStoredCredentials = async () => {\n            setLoading(true)\n            const getStoredCredentials = async () => await AsyncStorage.getItem(\"strava_credentials\")\n            const storedCredentials = JSON.parse(await getStoredCredentials())\n\n            if (await storedCredentials !== null) {\n                if (!TokenResponse.isTokenFresh(storedCredentials)) {\n                    const refreshedCredentials = await refreshAsync(\n                        {clientId: '80072', refreshToken: storedCredentials.refreshToken},\n                        discovery\n                    )\n\n                    setCredentials(refreshedCredentials)\n                    await AsyncStorage.setItem(\"strava_credentials\", JSON.stringify(refreshedCredentials))\n                    setLoggedIn(true)\n                    setLoading(false)\n                    return\n                }\n                setCredentials(storedCredentials)\n                setLoggedIn(true)\n                setLoading(false)\n            }\n        }\n\n        checkStoredCredentials()\n    }, [])\n\n    useEffect(() => {\n        const handleMessyOAuthRedirectFromStravaApp = async () => {\n            setLoading(true)\n            setMessyOAuthRedirectFromStravaApp(true)\n            const params = new URLSearchParams(window.location.search)\n            const paramsObj = {}\n            for (const [key, value] of params) {\n                paramsObj[key] = value\n            }\n            var newURL = location.href.split(\"?\")[0];\n            window.history.pushState('object', document.title, newURL);\n\n            if (paramsObj.code !== undefined && paramsObj.scope !== undefined && paramsObj.state !== undefined) {\n                if (paramsObj.scope === 'read,activity:read_all' || paramsObj.scope === 'activity:read_all,read') {\n                    exchangeCodeAsync(\n                        {\n                            clientId: '80072',\n                            redirectUri: makeRedirectUri({\n                                scheme: 'fastestx',\n                                path: 'FastestX'\n                            }),\n                            code: paramsObj.code,\n                        },\n                        discovery\n                    ).then((data) => {\n                        setCredentials(data)\n                        AsyncStorage.setItem(\"strava_credentials\", JSON.stringify(data))\n                        setLoading(false)\n                        setErrorState('')\n                        setLoggedIn(true)\n                    }).catch(() => {\n                        setErrorState('rate_limit')\n                        setLoading(false)\n                    })\n                } else {\n                    setErrorState('wrong_scope')\n                    setLoading(false)\n                }\n            } else if (paramsObj.error !== undefined) {\n                setErrorState('wrong_scope')\n                setLoading(false)\n            } else {\n                setErrorState('')\n                setLoading(false)\n            }\n        }\n\n        if (Platform.OS === 'web') {\n            handleMessyOAuthRedirectFromStravaApp()\n        }\n    }, [])\n\n    useEffect(() => {\n        if (response?.type === 'success') {\n            if (response?.params.scope === 'read,activity:read_all' || response?.params.scope === 'activity:read_all,read') {\n                setErrorState('')\n                setAccessToken()\n            } else {\n                setErrorState('wrong_scope')\n                setLoading(false)\n            }\n        } else if (response?.type === 'error') {\n            setErrorState('wrong_scope')\n            setLoading(false)\n        } else if (request !== null && !messyOAuthRedirectFromStravaApp) {\n            setErrorState('')\n            setLoading(false)\n        }\n    }, [response])\n\n    useEffect(() => {\n        const test = () => {\n            console.log(\n                {\n                    Platform: Platform,\n                    loggedIn: loggedIn,\n                    credentials: credentials,\n                    loading: loading,\n                    errorState: errorState,\n                    request: request,\n                    response: response,\n                },\n            )\n        }\n\n        test()\n    })\n\n    if (Platform.OS === 'android') {\n        UIManager.setLayoutAnimationEnabledExperimental(true);\n    }\n\n    return (\n        <>\n            <StatusBar backgroundColor=\"#fc5200\"/>\n            <SafeAreaProvider>\n                <SafeAreaView style={{flex: 1}}>\n                    <View style={[styles.topBar, {flexDirection: \"row\", justifyContent: \"center\"}]}>\n                        <View style={{\n                            alignItems: \"center\",\n                            flexDirection: \"row\",\n                            width: \"100%\",\n                            maxWidth: 700,\n                            justifyContent: \"space-between\"\n                        }}>\n                            <Text style={styles.title}>FastestX</Text>\n                            {loggedIn && !errorState &&\n                                <>\n                                    <Image\n                                        style={{height: 43, width: 104}}\n                                        contentFit=\"contain\"\n                                        source={pwrdByStravaSmall}\n                                    />\n                                    <Pressable\n                                        onPress={() => {\n                                            setLoading(true)\n                                            handleLogout()\n                                        }}\n                                        style={{marginRight: 16, justifyContent: 'center'}}\n                                    >\n                                        <AntDesign\n                                            name=\"logout\"\n                                            size={24}\n                                            color=\"black\"\n                                        />\n                                    </Pressable>\n                                </>\n                            }\n                        </View>\n                    </View>\n                    {\n                        loading ?\n                            <View style={{marginTop: 16, justifyContent: \"space-between\", flex: 1}}>\n                                <ActivityIndicator size='large' color=\"black\"/>\n                                <Image\n                                    style={{\n                                        width: \"100%\",\n                                        height: 63,\n                                        marginTop: 16\n                                    }}\n                                    contentFit=\"contain\"\n                                    source={pwrdByStravaBig}\n                                />\n                            </View> :\n                            loggedIn && !errorState ?\n                                <Feed credentials={credentials}></Feed> :\n                                <View style={{\n                                    flex: 1,\n                                    justifyContent: \"space-between\",\n                                    alignSelf: \"stretch\",\n                                    justifySelf: \"stretch\"\n                                }}>\n                                    <View>\n                                        {errorState === 'wrong_scope' ?\n                                            <Text\n                                                style={{\n                                                    width: \"90%\",\n                                                    marginLeft: \"5%\",\n                                                    marginTop: 16,\n                                                    color: 'red',\n                                                    textAlign: \"center\"\n                                                }}\n                                            >\n                                                FastestX needs the permission to read all of your activities' data to\n                                                work.\n                                            </Text> : <></>}\n                                        {errorState === 'rate_limit' ?\n                                            <Text\n                                                style={{\n                                                    width: \"90%\",\n                                                    marginLeft: \"5%\",\n                                                    marginTop: 16,\n                                                    color: 'red',\n                                                    textAlign: \"center\"\n                                                }}\n                                            >\n                                                FastestX reached it's usage limit. It will work again tomorrow.\n                                            </Text> : <></>}\n                                        <Pressable\n                                            style={{marginTop: 16}}\n                                            onPress={() => {\n                                                setLoading(true)\n                                                promptAsync()\n                                            }}\n                                        >\n                                            <Image\n                                                style={{height: 48}}\n                                                contentFit=\"contain\"\n                                                source={connectWithStrava}\n                                            />\n                                        </Pressable>\n                                        <View style={{marginTop: 16}}>\n                                            <Text style={{textAlign: \"center\"}}>Log in to see your activities</Text>\n                                        </View>\n                                        <Image\n                                            style={{height: 500, marginTop: 16}}\n                                            contentFit=\"contain\"\n                                            source={demo}\n                                        />\n                                    </View>\n                                    {(!loggedIn || errorState) &&\n                                        <Image\n                                            style={{\n                                                width: \"100%\",\n                                                height: 63\n                                            }}\n                                            contentFit=\"contain\"\n                                            source={pwrdByStravaBig}\n                                        />}\n                                </View>\n                    }\n                </SafeAreaView>\n            </SafeAreaProvider>\n        </>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        display: \"flex\"\n    },\n    topBar: {\n        height: 43,\n        backgroundColor: \"#fc5200\",\n    },\n    title: {\n        paddingLeft: 16,\n        fontSize: 32,\n    },\n    item: {\n        marginHorizontal: 16,\n        marginTop: 16,\n        backgroundColor: \"#fc5200\",\n        borderRadius: 20,\n        padding: 16,\n        elevation: 2,\n        boxShadowColor: \"#000\",\n        boxShadowOffset: {\n            width: 0,\n            height: 2\n        },\n        boxShadowOpacity: 0.25,\n        boxShadowRadius: 4,\n    },\n    input: {\n        backgroundColor: \"white\",\n        width: 100,\n        fontSize: 24,\n        textAlign: \"center\",\n        borderRadius: 10\n    },\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/FastestX/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [941], () => (__webpack_require__(605)))\nvar __webpack_exports__ = __webpack_require__.O(undefined, [941], () => (__webpack_require__(5036)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["ActivityMap","props","center","polygonCenter","positions","fastestLatlng","length","latlng","EPSG3857","mapShapes","shapeType","color","id","map","el","lat","lng","push","initialPosition","_jsx","_Fragment","children","Pressable","style","width","height","ExpoLeaflet","loadingIndicator","ActivityIndicator","onMessage","mapCenterPosition","mapLayers","attribution","baseLayerIsChecked","baseLayerName","layerType","url","mapOptions","zoomControl","Activity","useEffect","LayoutAnimation","configureNext","Presets","easeInEaseOut","setExpanded","setFastestDistance","setDistanceMeasure","distanceMeasure","setTimeMeasure","timeMeasure","setLoading","setPositions","_useState","useState","_useState2","_slicedToArray","fastestDistance","_useState3","_useState4","loading","_useState5","_useState6","expanded","_useState7","_useState8","_useState9","_useState10","_useState11","_useState12","_findFastestDistance","_asyncToGenerator","trivial_winner","start","distance","time","end","heartrate","elevation","gain","loss","range","_streams$altitude2","_streams$distance2","_streams$time2","_streams$heartrate2","_streams$latlng2","streams","getStreams","activity","altitudeStream","altitude","data","distanceStream","timeStream","heartrateStream","latlngStream","_objectSpread","fastestSegment","total_elevation_gain","Math","round","reduce","acc","curr","arr","total_elevation_loss","elapsed_time","undefined","timeStreamUpperLimit","slice","_loop2","_i","j","indexOf","i","find","currentSegment","pace","timeInHoursAndMinutes","relevantAltitudeStream","_streams$altitude","_streams$distance","_streams$time","_streams$heartrate","_streams$latlng","distanceStreamUpperLimit","_loop","apply","arguments","hours","floor","rest","minutes","_x","_getStreams","fetch","credentials","accessToken","then","res","json","_jsxs","styles","item","onPress","findFastestDistance","Text","name","textAlign","Date","start_date","toLocaleDateString","Linking","openURL","textDecorationColor","textDecorationLine","View","separator","_positions$latlng","_positions$latlng2","_positions$latlng3","modalContainer","modalLine","justifyContent","isNaN","Ionicons","alignSelf","size","MaterialCommunityIcons","average_speed","display","fontSize","fontWeight","average_heartrate","replace","flex","marginRight","alignItems","marginLeft","marginTop","FontAwesome5","StyleSheet","create","marginHorizontal","backgroundColor","borderRadius","padding","boxShadowColor","boxShadowOffset","boxShadowOpacity","boxShadowRadius","modal","flexDirection","marginBottom","Feed","activities","setActivities","refreshing","setRefreshing","page","setPage","getActivities","_getActivities","refresh","forEach","isExpanded","concat","catch","error","console","log","finally","FlatList","maxWidth","renderItem","_ref","keyExtractor","keyboardDismissMode","onRefresh","ListHeaderComponent","TextInput","input","contextMenuHidden","selectionColor","inputMode","onChangeText","text","number","value","toString","ListFooterComponent","pwrdByStravaSmall","require","connectWithStrava","pwrdByStravaBig","demo","WebBrowser","maybeCompleteAuthSession","discovery","authorizationEndpoint","tokenEndpoint","revocationEndpoint","App","loggedIn","setLoggedIn","setCredentials","errorState","setErrorState","messyOAuthRedirectFromStravaApp","setMessyOAuthRedirectFromStravaApp","setAccessToken","exchangeCodeAsync","clientId","request","redirectUri","makeRedirectUri","scheme","path","code","response","params","AsyncStorage","setItem","JSON","stringify","_useAuthRequest","useAuthRequest","scopes","_useAuthRequest2","promptAsync","handleLogout","_ref2","method","removeItem","checkStoredCredentials","_ref3","getStoredCredentials","_ref4","getItem","storedCredentials","parse","TokenResponse","isTokenFresh","refreshedCredentials","refreshAsync","refreshToken","handleMessyOAuthRedirectFromStravaApp","_ref5","URLSearchParams","window","location","search","paramsObj","_ref6","_ref7","key","newURL","href","split","history","pushState","document","title","scope","state","Platform","OS","type","UIManager","setLayoutAnimationEnabledExperimental","StatusBar","SafeAreaProvider","SafeAreaView","topBar","Image","contentFit","source","AntDesign","justifySelf","container","paddingLeft","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","Object","keys","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","e","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}